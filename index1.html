<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Moves Solitaire</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
</head>
<body>
    <canvas id="starfield-canvas" class="background-canvas"></canvas>
    <canvas id="lavalamp-canvas" class="background-canvas"></canvas>
    <canvas id="ocean-canvas" class="background-canvas"></canvas>
    <canvas id="matrix-canvas" class="background-canvas"></canvas>
    <canvas id="geometric-canvas" class="background-canvas"></canvas>
    <canvas id="fire-canvas" class="background-canvas"></canvas>
    <canvas id="rain-canvas" class="background-canvas"></canvas>
    <canvas id="hyperspace-canvas" class="background-canvas"></canvas>
    <canvas id="plasma-canvas" class="background-canvas"></canvas>
    <canvas id="forest-canvas" class="background-canvas"></canvas>
    <canvas id="neongrid-canvas" class="background-canvas"></canvas>
    <canvas id="sakura-canvas" class="background-canvas"></canvas>
    <canvas id="quantum-canvas" class="background-canvas"></canvas>
    <canvas id="digitalrain-canvas" class="background-canvas"></canvas>
    <canvas id="sands-canvas" class="background-canvas"></canvas>
    <canvas id="inkblot-canvas" class="background-canvas"></canvas>
    <canvas id="cosmic-canvas" class="background-canvas"></canvas>
    <canvas id="musicviz-canvas" class="background-canvas"></canvas>
    <canvas id="bioforest-canvas" class="background-canvas"></canvas>
    <canvas id="stainedglass-canvas" class="background-canvas"></canvas>
    <canvas id="watery-canvas" class="background-canvas"></canvas>
    <canvas id="swarm-canvas" class="background-canvas"></canvas>
    <canvas id="glitch-canvas" class="background-canvas"></canvas>
    <canvas id="aurora-canvas" class="background-canvas"></canvas>
    <canvas id="constellation-canvas" class="background-canvas"></canvas>
    <canvas id="synthwave-canvas" class="background-canvas"></canvas>
    <canvas id="nebula-canvas" class="background-canvas"></canvas>
    <canvas id="jungle-canvas" class="background-canvas"></canvas>
    <canvas id="cityscape-canvas" class="background-canvas"></canvas>
    <canvas id="paint-canvas" class="background-canvas"></canvas>
    <canvas id="laserGrid-canvas" class="background-canvas"></canvas>
    <canvas id="neonPalms-canvas" class="background-canvas"></canvas>
    <canvas id="memphis-canvas" class="background-canvas"></canvas>
    <canvas id="cassette-canvas" class="background-canvas"></canvas>
    <canvas id="eightBitCity-canvas" class="background-canvas"></canvas>
    
    <div id="flash-overlay"></div>

    <div id="title-screen">
        <div class="title-cards"></div>
        <h1>Smooth Moves Solitaire</h1>
        <button id="start-game-btn">Start Game</button>
    </div>

    <div id="game-container">
        <canvas id="combo-canvas"></canvas>
        <div id="top-bar">
            <div id="player-stats-panel">
                <div id="xp-container">
                    <span id="level-text">Level 1</span>
                    <div id="xp-bar-container">
                        <div id="xp-bar"></div>
                    </div>
                    <span id="xp-text">0/10 XP</span>
                </div>
                <div id="achievement-score-display">üèÜ 0</div>
                <div id="game-timer">00:00</div>
            </div>
            <div class="game-controls">
                <button id="new-game-btn">New Game</button>
                <button id="autocomplete-btn" class="hidden">Autocomplete</button>
                <button id="undo-btn">‚éå Undo (0)</button>
                <button id="hint-btn">üí° Hint (0)</button>
                <button id="achievements-btn">üèÜ</button>
                <button id="options-btn">‚öôÔ∏è</button>
                <button id="fullscreen-btn">
                    <svg id="fullscreen-icon" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                    <svg id="exit-fullscreen-icon" viewBox="0 0 24 24" style="display: none;"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>
                </button>
                <button id="mute-btn">
                    <svg id="unmuted-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    <svg id="muted-icon" viewBox="0 0 24 24" style="display: none;"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                </button>
            </div>
        </div>
        <div id="game-board-container">
            <div id="message-box"></div>
            <div id="game-board">
                <div class="upper-area">
                    <div class="stock-waste-area">
                        <div class="pile stock" id="stock-pile"></div>
                        <div class="pile" id="waste-pile"></div>
                    </div>
                    <div class="foundation-area">
                        <div class="pile" id="foundation-0"></div><div class="pile" id="foundation-1"></div>
                        <div class="pile" id="foundation-2"></div><div class="pile" id="foundation-3"></div>
                    </div>
                </div>
                <div class="tableau-pile" id="tableau-0"></div><div class="tableau-pile" id="tableau-1"></div>
                <div class="tableau-pile" id="tableau-2"></div><div class="tableau-pile" id="tableau-3"></div>
                <div class="tableau-pile" id="tableau-4"></div><div class="tableau-pile" id="tableau-5"></div>
                <div class="tableau-pile" id="tableau-6"></div>
            </div>
        </div>
        <footer style="margin-top: auto; padding-top: 20px;">Created by PM Lewis</footer>
    </div>

    <div id="draw-select-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Choose Draw Style</h2>
            <p>Select whether to draw one or three cards from the stock pile at a time.</p>
            <div class="modal-buttons">
                <button id="draw-1-btn">Draw 1</button>
                <button id="draw-3-btn">Draw 3</button>
            </div>
        </div>
    </div>
    <div id="card-style-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Choose Card Style</h2>
            <p>Select your preferred card face style for this game.</p>
            <div class="modal-buttons">
                <button id="normal-style-btn">Normal</button>
                <button id="easy-see-btn">Easy See</button>
            </div>
        </div>
    </div>
    <div id="options-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Options</h2>
            <div class="options-section">
                <h4>Playing Boards</h4>
                <div>New backgrounds unlock with each level!</div>
                <div id="board-selector" class="options-grid"></div>
            </div>
            <div class="options-section">
                <h4>Card Backs</h4>
                <div>New card backs unlock with each level!</div>
                <div id="card-back-selector" class="options-grid"></div>
            </div>
             <div class="options-section">
                <h4>Music Tracks</h4>
                <div>New tracks unlock every other level!</div>
                <div id="music-selector" class="options-grid"></div>
            </div>
            <div class="options-section" style="text-align: center; margin-top: 30px;">
                <button id="reset-progress-btn" style="background-color: #d9534f; border-color: #d43f3a;">Reset All Progress</button>
            </div>
        </div>
    </div>
    <div id="reset-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Reset Progress</h2>
            <p>Are you sure you want to reset all of your progress? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button id="reset-confirm-btn">Yes, Reset</button>
                <button id="reset-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>
    <div id="unlock-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="unlock-title"></h2>
            <p id="unlock-description"></p>
            <p id="unlock-prompt" style="display:none;">Would you like to apply it now?</p>
            <div class="modal-buttons">
                <button id="unlock-apply-btn" style="display:none;">Yes, Apply!</button>
                <button id="unlock-close-btn">Awesome!</button>
            </div>
        </div>
    </div>
    <div id="achievement-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Achievements</h2>
            <div id="achievement-list"></div>
        </div>
    </div>

    <div id="achievement-container"></div>
    <div id="fireworks-container"></div>

    <script src="main.js" defer></script>
</body>
</html>